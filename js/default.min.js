var isCreateFormVisible=false;function Security(){}Security.getCSRFToken=function(b,a){if(a==undefined){a=known.currentPageUrl}$.ajax({type:"GET",data:{url:a},url:known.config.displayUrl+"service/security/csrftoken/"}).done(function(d,e,c){b(d.token,d.time)})};Security.refreshTokens=function(){$(".known-security-token").each(function(){var a=$(this).closest("form");Security.getCSRFToken(function(b,c){a.find("input[name=__bTk]").val(b);a.find("input[name=__bTs]").val(c)},a.find("input[name=__bTa]").val())})};setInterval(function(){Security.refreshTokens()},300000);Security.activateACLControls=function(){$(".acl-ctrl-option").each(function(){if($(this).data("acl")==$(this).closest(".access-control-block").find("input").val()){$(this).closest(".btn-group").find(".dropdown-toggle").html($(this).html()+' <span class="caret"></span>')}});$(".acl-ctrl-option").on("click",function(){$(this).closest(".access-control-block").find("input").val($(this).data("acl"));$(this).closest(".btn-group").find(".dropdown-toggle").html($(this).html()+' <span class="caret"></span>');$(this).closest(".btn-group").find(".dropdown-toggle").click()})};$(document).ready(function(){Security.activateACLControls()});function Notifications(){}Notifications.poll=function(){$.get(known.config.displayUrl+"service/notifications/new-notifications").done(function(c){console.log("Polling for new notifications succeeded");console.log(c);if(c.notifications){if(c.notifications.length>0){var d=c.notifications[0].title;var a=c.notifications[0].body;var b=c.notifications[0].icon;new Notification(d,{icon:b,body:a})}}}).fail(function(a){console.log("Polling for new notifications failed")})};Notifications.enable=function(a){if(!known.session.loggedIn){return}if(!("Notification" in window)){console.log("The Notification API is not supported by this browser");return}if(Notification.permission!=="denied"&&Notification.permission!=="granted"&&!a){Notification.requestPermission(function(b){if(b==="granted"){setInterval(Notifications.poll,10000)}})}else{if(Notification.permission==="granted"){setInterval(Notifications.poll,10000)}}};function doPoll(){Notifications.poll()}function bindControls(){$(".acl-ctrl-option").click(function(){$("#access-control-id").val($(this).attr("data-acl"));$("#acl-text").html($(this).html())});$(".syndication-toggle input[type=checkbox]").bootstrapToggle();$(".ignore-this").hide()}function contentCreateForm(a,b){if(isCreateFormVisible){return}isCreateFormVisible=true;$.ajax(b,{dataType:"html",success:function(c){$("#contentCreate").html(c).slideDown(400);$("#contentTypeButtonBar").slideUp(400);window.contentCreateType=a;window.contentPage=true;bindControls()},error:function(c){$("#contentTypeButtonBar").slideDown(400);isCreateFormVisible=false}})}function hideContentCreateForm(){isCreateFormVisible=false;if(window.contentPage==true){$("#contentTypeButtonBar").slideDown(200);$("#contentCreate").slideUp(200)}else{if(window.history.length>1){window.history.back()}}}function autoSave(c,d,b){var a={};setInterval(function(){var j={};for(var g=0;g<d.length;g++){var f=d[g];var e="#"+f;if(b&&f in b){e=b[f]}var h=false;if($(e).val()!=a[f]){h=$(e).val()}if(h!==false){j[f]=h;a[f]=h}}if(Object.keys(j).length>0){$.post(wwwroot()+"autosave/",{context:c,elements:j,names:d},function(){})}},10000)}function knownStripHTML(b){var a=document.createElement("DIV");a.innerHTML=b;return a.textContent||a.innerText||""}function inIframe(){try{return window.self!==window.top}catch(a){return true}}function htmlEntityDecode(a){var b=document.createElement("textarea");b.innerHTML=a;return b.value}function wwwroot(){return known.config.displayUrl}function isLoggedIn(){if(typeof known!=="undefined"){if(known.session.loggedIn){return true}}return false}$(document).ready(function(){var a=$("#soft-forward").attr("href");if(!!a){window.location=a}if(known.session.loggedIn){}});